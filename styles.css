/* ==========================================================
   FLOWTV - styles.css (final)
   - Header + clock + now-playing
   - Tabs สะอาดตา (ข้อความล้วนหรือมีไอคอนก็ได้)
   - Grid ของการ์ดช่อง "เท่ากันจริง" ทุกอุปกรณ์
   - รองรับ class โลโก้ ทั้ง .ch-logo / .logo / img ภายในการ์ด
   - หมวด "หนัง" ปรับโลโก้นอนยาวให้พอดี
   - แบนเนอร์ update / error + toast + Histats badge
   ========================================================== */

:root{
  /* สีพื้นฐาน */
  --bg: #0b0f14;
  --panel: #121821;
  --panel-2: #0f151d;
  --text: #e8f0ff;
  --muted: #9fb0c1;
  --border: rgba(255,255,255,.08);

  /* ขนาดรวม */
  --maxw: 1200px;
  --gap: 12px;

  /* Player */
  --player-radius: 18px;

  /* Tabs (ข้อความล้วน) */
  --tab-w: clamp(86px, 13vw, 120px);
  --tab-h: 42px;
  --tab-radius: 12px;

  /* การ์ดช่อง (คงที่จริง) */
  --tile-w: 100px;   /* ความกว้างคอลัมน์ */
  --tile-h: 112px;   /* ความสูงแถว */
  --tile-g: 10px;    /* ระยะห่างการ์ด */

  /* โลโก้ช่อง */
  --logo-max-w: 72%;
  --logo-max-h: 56%;
}

/* ---------- Base ---------- */
*{ box-sizing:border-box }
html,body{ height:100% }
html,body{
  margin:0;
  background:
    radial-gradient(1200px 600px at 50% -200px, #182233 0%, transparent 60%),
    linear-gradient(#0a0f15,#080c11) fixed;
  background-color: var(--bg);
  color: var(--text);
  font: 14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans Thai",sans-serif;
}

button{ all: unset; display: inline-block; cursor: pointer; }
a{ color: inherit; text-decoration: none }

/* ---------- Header ---------- */
header{
  position: sticky; top: 0; z-index: 20;
  background: linear-gradient(180deg, rgba(7,10,15,.95), rgba(7,10,15,.75));
  backdrop-filter: blur(6px);
  border-bottom: 1px solid rgba(255,255,255,.06);
}
.h-wrap{
  max-width: var(--maxw);
  margin: 0 auto;
  padding: 10px 14px;
  display: grid;
  justify-items: center;
  gap: 4px;
  position: relative;
}
.clock{ font-weight: 800; letter-spacing: .2px; }
.sub{ color: var(--muted); font-size: 12px; }

/* Histats badge (มุมขวาบน header) */
#histats_counter{
  position: absolute;
  right: 6px; top: 6px;
  transform: scale(.86);
  transform-origin: top right;
  pointer-events: none; /* ไม่บังการคลิก */
}
#histats_counter #histatsC{ position: static !important }
#histats_counter img{ opacity:.9; filter: drop-shadow(0 1px 2px rgba(0,0,0,.45)) }
@media (max-width:640px){ #histats_counter{ transform: scale(.76) } }
@media (max-width:480px){ #histats_counter{ transform: scale(.66) } }

/* ---------- Layout ---------- */
.app{
  max-width: var(--maxw);
  margin: 10px auto 60px;
  padding: 0 14px;
}

/* ---------- Player ---------- */
#player{
  width: 100%;
  aspect-ratio: 16 / 9;
  background: #05080c;
  border: 1px solid rgba(255,255,255,.06);
  border-radius: var(--player-radius);
  box-shadow: 0 6px 18px rgba(0,0,0,.45) inset, 0 10px 30px rgba(0,0,0,.35);
  overflow: hidden;
}

/* ---------- Tabs (ข้อความล้วน) ---------- */
.tabs{
  margin: 14px 0 6px;
  display: flex; gap: 10px;
  overflow-x: auto; -webkit-overflow-scrolling: touch;
  padding: 6px 2px 8px;
  scrollbar-width: thin;
  justify-content: center;   /* อยู่กลางจอ */
}
.tabs::-webkit-scrollbar{ height:8px }
.tabs::-webkit-scrollbar-thumb{ background:#1f2835; border-radius:10px }

.tab{
  flex: 0 0 var(--tab-w);
  height: var(--tab-h);
  display: grid; place-items: center;
  padding: 0 10px;
  border-radius: var(--tab-radius);
  border: 1px solid rgba(255,255,255,.08);
  background: linear-gradient(180deg, #121821, #0f151d);
  color: var(--text);
  font-weight: 700;
  letter-spacing: .2px;
  box-shadow: 0 3px 12px rgba(0,0,0,.35);
  transition: transform .12s ease, border-color .2s ease, box-shadow .2s ease;
}
.tab:hover{ transform: translateY(-1px) }
.tab[aria-selected="true"]{
  border-color: rgba(70,164,255,.65);
  box-shadow: 0 8px 24px rgba(70,164,255,.16);
}

/* ---------- Grid (การ์ดช่องเท่ากันจริง) ---------- */
.grid{
  display: grid;
  gap: var(--tile-g);
  grid-template-columns: repeat(auto-fill, minmax(var(--tile-w), var(--tile-w)));
  grid-auto-rows: var(--tile-h);
  justify-content: center;
  align-content: start;
  margin-top: 10px;
}

/* ---------- Channel Card ---------- */
.channel{
  position: relative;
  width: var(--tile-w);
  height: var(--tile-h);
  border-radius: 12px;
}
.ch-card{
  width: 100%; height: 100%;
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 9px 6px 8px;
  box-shadow: 0 6px 16px rgba(0,0,0,.18);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  transition: transform .12s ease, border-color .15s ease, box-shadow .15s ease;
  overflow: hidden;
}
.channel:hover .ch-card{
  transform: translateY(-1px);
  border-color: rgba(255,255,255,.65);
  box-shadow: 0 0 0 1px rgba(255,255,255,.45) inset, 0 8px 22px rgba(0,0,0,.25);
}
.channel:active .ch-card{ transform: scale(.985) }

/* โลโก้ — รองรับทั้ง .ch-logo / .logo / img ภายในการ์ด */
.ch-card img,
.ch-logo,
.logo{
  display: block;
  width: auto; height: auto;
  max-width: var(--logo-max-w);
  max-height: var(--logo-max-h);
  object-fit: contain;        /* ไม่บิด ไม่ล้น */
  image-rendering: auto;
  filter: drop-shadow(0 1px 2px rgba(0,0,0,.35));
}

/* หมวด “หนัง” : โลโก้นอนยาว → เล็กลงนิดกันชนขอบ */
.channel[data-category="หนัง"] .ch-card img,
.channel[data-category="หนัง"] .ch-logo,
.channel[data-category="หนัง"] .logo{
  max-width: 82%;
  max-height: 44%;
}

/* ชื่อช่อง สองบรรทัดคงที่เสมอ */
.ch-name,
.name{
  margin-top: 8px;
  color: #e7e7e7;
  font-weight: 700;
  font-size: 12px;
  line-height: 1.25;
  height: calc(1.25em * 2);
  text-align: center;
  display: -webkit-box;
  -webkit-line-clamp: 2; -webkit-box-orient: vertical;
  overflow: hidden; text-overflow: ellipsis;
}

/* ---------- Helper text ---------- */
.tip{ margin-top: 10px; color: var(--muted); font-size: 12px }

/* ---------- Notices (update/error) ---------- */
.notice-host{ max-width: var(--maxw); margin: 8px auto 0; padding: 0 14px }
.notice{
  border-radius: 14px;
  padding: 14px 14px 12px;
  margin: 10px 0;
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
}
.notice--update{ background: linear-gradient(180deg, #10212e, #0f1824) }
.notice--error{  background: linear-gradient(180deg, #2a0f15, #1c0d11) }
.notice-title{ font-weight:800; letter-spacing:.2px; margin-bottom:4px }
.notice-msg{ color: var(--muted); margin-bottom:10px }
.notice-actions{ display:flex; flex-wrap:wrap; gap:8px }
.btn{
  border:1px solid rgba(255,255,255,.1);
  background:#121821; color:#e9f3ff;
  padding:8px 12px; border-radius:10px; cursor:pointer; font-weight:700;
}
.btn.primary{
  background: linear-gradient(90deg, #46a4ff, #00d1ff);
  border-color: transparent; color:#001019;
}
.btn.danger{
  background: linear-gradient(90deg, #ff6b6b, #ff9966);
  border-color: transparent; color:#200;
}

/* ---------- Toast (mobile) ---------- */
.now-playing-toast{
  position: fixed; left:50%; transform:translateX(-50%) translateY(20px);
  bottom: 82px; z-index: 40;
  background: rgba(8,12,18,.86);
  border:1px solid rgba(255,255,255,.08);
  color:#e9f3ff; padding:10px 14px; border-radius:12px;
  box-shadow: 0 10px 26px rgba(0,0,0,.45);
  opacity:0; pointer-events:none; transition: opacity .2s, transform .2s;
}
.now-playing-toast.show{ opacity:1; transform:translateX(-50%) translateY(0) }

/* ---------- Responsive tweaks ---------- */
@media (max-width: 900px){
  :root{ --tile-w: 96px; --tile-h: 108px; }
}
@media (max-width: 640px){
  :root{
    --tile-w: 92px; --tile-h: 104px; --tile-g: 8px;
    --tab-h: 40px;
  }
  .clock{ font-size: 15px }
}
@media (max-width: 390px){
  :root{ --tile-w: 88px; --tile-h: 100px }
}
@media (max-height: 420px) and (orientation:landscape){
  :root{ --tile-h: 96px }
}

/* --------- Reduce motion --------- */
@media (prefers-reduced-motion: reduce){
  .tab, .channel, .now-playing-toast{ transition: none !important }
}
