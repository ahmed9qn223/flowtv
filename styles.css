/* ==========================================================
   FLOWTV - styles.css (classic glass tabs + equal cards)
   - Header + player
   - Tabs แบบการ์ดแก้ว ไอคอนด้านบน + ชื่อด้านล่าง (รองรับ text-only ด้วย)
   - Grid การ์ดช่องขนาดเท่ากันทุกอุปกรณ์
   - รองรับ .ch-logo / .logo / img ภายในการ์ด
   - หมวด "หนัง" ปรับโลโก้นอนยาว
   ========================================================== */

:root{
  --bg:#0b0f14; --panel:#121821; --panel-2:#0f151d; --text:#e8f0ff; --muted:#a3b2c2;
  --border:rgba(255,255,255,.08); --maxw:1200px;

  /* Player */
  --player-radius:18px;

  /* Tabs */
  --tab-gap:10px;      /* ระยะไอคอน ↔ ชื่อ */
  --tabW:clamp(86px,12vw,110px);
  --tabH:clamp(70px,12vw,88px);
  --tabRadius:12px;

  /* Cards */
  --tile-w:100px;
  --tile-h:112px;
  --tile-g:10px;

  /* Logo */
  --logo-max-w:72%;
  --logo-max-h:56%;
}

/* ---------- Base ---------- */
*{box-sizing:border-box}
html,body{height:100%}
html,body{
  margin:0;
  background:
    radial-gradient(1200px 600px at 50% -200px, #182233 0%, transparent 60%),
    linear-gradient(#0a0f15,#080c11) fixed;
  color:var(--text);
  font:14px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans Thai",sans-serif;
}
a{color:inherit;text-decoration:none}
button{all:unset;display:inline-block;cursor:pointer}

/* ---------- Header ---------- */
header{
  position:sticky; top:0; z-index:20;
  background:linear-gradient(180deg, rgba(7,10,15,.95), rgba(7,10,15,.78));
  backdrop-filter:blur(6px);
  border-bottom:1px solid rgba(255,255,255,.06);
}
.h-wrap{
  max-width:var(--maxw); margin:0 auto; padding:10px 14px;
  display:grid; justify-items:center; gap:4px; position:relative;
}
.clock{font-weight:800;letter-spacing:.2px}
.sub{color:var(--muted);font-size:12px}

/* Histats (มุมขวาบน) – คงไว้ถ้าใช้ */
#histats_counter{position:absolute;right:6px;top:6px;transform:scale(.82);transform-origin:top right;pointer-events:none}
#histats_counter img{opacity:.9;filter:drop-shadow(0 1px 2px rgba(0,0,0,.45))}
@media(max-width:640px){#histats_counter{transform:scale(.72)}}
@media(max-width:480px){#histats_counter{transform:scale(.64)}}

/* ---------- Layout ---------- */
.app{max-width:var(--maxw);margin:10px auto 60px;padding:0 14px}

/* Player */
#player{
  width:100%; aspect-ratio:16/9; overflow:hidden;
  border-radius:var(--player-radius);
  background:#05080c; border:1px solid rgba(255,255,255,.06);
  box-shadow:0 6px 18px rgba(0,0,0,.45) inset, 0 10px 30px rgba(0,0,0,.35);
}

/* ---------- Tabs (Glass + Icon on top) ---------- */
.tabs{
  margin:14px 0 6px; display:flex; gap:10px;
  overflow-x:auto; -webkit-overflow-scrolling:touch; padding:6px 2px 8px;
  scrollbar-width:thin; justify-content:center;
}
.tabs::-webkit-scrollbar{height:8px}
.tabs::-webkit-scrollbar-thumb{background:#1f2835;border-radius:10px}

.tab{
  position:relative; flex:0 0 var(--tabW);
  height:var(--tabH);
  border-radius:var(--tabRadius);
  border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(180deg, #121821, #0f151d);
  box-shadow:0 1px 0 rgba(255,255,255,.06) inset, 0 8px 20px rgba(0,0,0,.30);
  color:#fff; text-align:center; -webkit-tap-highlight-color:transparent;
  transition:transform .12s ease, border-color .18s ease, box-shadow .18s ease;
  display:grid; place-items:center;
}
/* กรณี “ไม่มี .tab-card” = ข้อความล้วน → จัดให้อยู่กลาง */
.tab:not(:has(.tab-card)){font-weight:800;letter-spacing:.2px;padding:6px}

/* ฉบับไอคอน + ข้อความ */
.tab-card{
  width:100%; height:100%; padding:10px 8px; border-radius:inherit;
  display:grid; grid-template-rows:auto auto; place-items:center; gap:var(--tab-gap);
}
.tab-icon{
  width:42px; height:42px; border-radius:50%; position:relative; display:grid; place-items:center;
}
.tab-icon::before{
  content:""; position:absolute; inset:0; border-radius:inherit;
  background:
    radial-gradient(120% 120% at 30% 20%, rgba(255,255,255,.18), rgba(255,255,255,.06)),
    linear-gradient(180deg, rgba(0,0,0,.38), rgba(0,0,0,.58));
  box-shadow: inset 0 1px 0 rgba(255,255,255,.25), 0 8px 16px rgba(0,0,0,.25);
}
.tab-icon svg{ width:60%; height:60%; display:block; color:#fff; z-index:1; filter:drop-shadow(0 1px 1px rgba(0,0,0,.6))}
.tab-label{ font-weight:800; font-size:11px; letter-spacing:.2px }

.tab:hover{ transform:translateY(-1px) }
.tab:active{ transform:scale(.985) }
.tab[aria-selected="true"]{
  border-color:rgba(255,255,255,.7);
  box-shadow:0 0 0 1px rgba(255,255,255,.45) inset, 0 10px 26px rgba(0,0,0,.32);
}
/* เส้นเน้นใต้แท็บ */
.tab::after{
  content:""; position:absolute; left:50%; bottom:-2px; width:56%; height:3px; border-radius:3px;
  background:var(--accent,#46a4ff);
  box-shadow:0 2px 10px color-mix(in srgb, var(--accent) 60%, transparent);
  transform:translate3d(-50%,0,0) scaleX(0); transform-origin:center; opacity:0;
  transition:transform .22s ease, opacity .22s ease;
}
.tab[aria-selected="true"]::after{transform:translate3d(-50%,0,0) scaleX(1);opacity:1}

/* สี accent รายหมวด */
.tab[data-filter="ข่าว"]{--accent:#ef4444}
.tab[data-filter="บันเทิง"]{--accent:#f59e0b}
.tab[data-filter="กีฬา"]{--accent:#22c55e}
.tab[data-filter="สารคดี"]{--accent:#06b6d4}
.tab[data-filter="เพลง"]{--accent:#a855f7}
.tab[data-filter="หนัง"]{--accent:#f97316}

/* ---------- Grid (การ์ดช่องเท่ากันจริง) ---------- */
.grid{
  display:grid; gap:var(--tile-g);
  grid-template-columns:repeat(auto-fill, minmax(var(--tile-w), var(--tile-w)));
  grid-auto-rows:var(--tile-h);
  justify-content:center; align-content:start; margin-top:10px;
}

/* ---------- Channel Card ---------- */
.channel{position:relative;width:var(--tile-w);height:var(--tile-h);border-radius:12px}
.ch-card{
  width:100%; height:100%;
  background:linear-gradient(180deg, var(--panel), var(--panel-2));
  border:1px solid var(--border); border-radius:12px;
  padding:9px 6px 8px; box-shadow:0 6px 16px rgba(0,0,0,.18);
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  transition:transform .12s ease, border-color .15s ease, box-shadow .15s ease; overflow:hidden;
}
.channel:hover .ch-card{
  transform:translateY(-1px);
  border-color:rgba(255,255,255,.65);
  box-shadow:0 0 0 1px rgba(255,255,255,.45) inset, 0 8px 22px rgba(0,0,0,.25);
}
.channel:active .ch-card{transform:scale(.985)}

/* โลโก้ — รองรับทุกชื่อคลาส */
.ch-card img, .ch-logo, .logo{
  display:block; width:auto; height:auto;
  max-width:var(--logo-max-w); max-height:var(--logo-max-h);
  object-fit:contain; filter:drop-shadow(0 1px 2px rgba(0,0,0,.35));
}

/* หมวด “หนัง” โลโก้นอนยาว */
.channel[data-category="หนัง"] .ch-card img,
.channel[data-category="หนัง"] .ch-logo,
.channel[data-category="หนัง"] .logo{
  max-width:82%; max-height:44%;
}

/* ชื่อช่อง 2 บรรทัดคงที่ */
.ch-name, .name{
  margin-top:8px; color:#e7e7e7; font-weight:700; font-size:12px;
  line-height:1.25; height:calc(1.25em * 2); text-align:center;
  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;
}

/* Helper */
.tip{margin-top:10px;color:var(--muted);font-size:12px}

/* ---------- Responsive ---------- */
@media(max-width:900px){ :root{--tile-w:96px;--tile-h:108px} }
@media(max-width:640px){
  :root{--tile-w:92px;--tile-h:104px;--tile-g:8px}
  .clock{font-size:15px}
}
@media(max-width:390px){ :root{--tile-w:88px;--tile-h:100px} }
@media(max-height:420px) and (orientation:landscape){ :root{--tile-h:96px} }

/* Reduce motion */
@media (prefers-reduced-motion:reduce){
  .tab,.channel{transition:none !important}
}
